---
title: "Introduction Ã  R et RStudio"
subtitle: "Premiers pas, bonnes pratiques et *workflow*"
author:
  - name: "Amal Tawfik"
    orcid: "0009-0006-2422-1555"
    email: "amal.tawfik@hesav.ch"
    affiliations: "HESAV Haute Ã‰cole de SantÃ© - Vaud (HES-SO)"
date: "06 novembre 2025"

lang: fr
execute:
  freeze: auto

lightbox: true

format:
  clean-revealjs:
    # Apparence et logo
    logo: img/logo_hesav_black.png
    css: styles/nicecustom.scss

    # Navigation
    menu:
      side: left

    # NumÃ©ros et date
    slide-number: true
    date-format: long

    # Math / code / interactivitÃ©
    html-math-method: mathjax
    preview-links: auto
    chalkboard:
      buttons: true
      theme: whiteboard
    code-line-numbers: false
    code-overflow: scroll
    transition: fade
---


## Objectifs du module

-   DÃ©couvrir lâ€™environnement R et RStudio\
-   Configurations de base
-   Objets, fonctions et *packages*
-   CrÃ©er un premier script et exÃ©cuter des commandes de base\
-   Comprendre la logique des scripts et du *workflow* reproductible\
-   GÃ©rer un projet R et importer des donnÃ©es

La prÃ©sentation est disponible sur ce site : [https://amaltawfik.github.io/modules-soutien-statistique-hesav/](https://amaltawfik.github.io/modules-soutien-statistique-hesav/)


## Pourquoi apprendre RÂ ?

-   R est un logiciel libre et open source distribuÃ© sous licence GPL
-   Un des langages de programmation les plus utilisÃ©s pour les analyses statistiques
-   ReproductibilitÃ© et transparence
-   FonctionnalitÃ©s infiniesÂ : tout le monde peut y contribuer et crÃ©er ses propres outils (fonctions et *packages*)
-   Grande communautÃ© et documentation

## Principes de R

-   R fonctionne Ã  partir de lignes de commande et de scripts

-   Les commandes R sont gÃ©nÃ©ralement simples Ã  comprendre et ne nÃ©cessitent aucune expÃ©rience prÃ©alable en programmation pour dÃ©buter

-   Les scripts offrent une rÃ©elle valeur ajoutÃ©eÂ : ils peuvent Ãªtre sauvegardÃ©s, modifiÃ©s, rÃ©utilisÃ©s et partagÃ©s trÃ¨s facilement

-   R fonctionne avec des *packages* (extensions) qui sont un ensemble de fonctions qui Ã©tendent les fonctionnalitÃ©s de R

-   R est constituÃ© de plusieurs packages de base, auxquels dâ€™autres peuvent Ãªtre ajoutÃ©s selon les besoins

## Ressources clÃ©s pour lâ€™Ã©cosystÃ¨me R {.smaller}

-   **Site officiel du projet R**Â : [r-project.org](https://www.r-project.org/)\
-   **CRAN (Comprehensive R Archive Network)** â€” rÃ©seau de serveurs hÃ©bergeant les packages, la documentation et les binaires de RÂ : [cloud.r-project.org](https://cloud.r-project.org/)\
-   **R-universe (rOpenSci)** â€” plate-forme communautaire pour hÃ©berger et explorer des packages RÂ : [ropensci.org/r-universe](https://ropensci.org/r-universe/)\
-   **Moteur de recherche R-universe** â€” dÃ©couvrir des packages R et leurs mainteneursÂ : [r-universe.dev/search](https://r-universe.dev/search)\
-   **METACRAN** â€” moteur de recherche et visualisation des packages CRANÂ : [r-pkg.org](https://www.r-pkg.org/)\
-   **Rseek** â€” moteur de recherche spÃ©cialisÃ©, ciblant la documentation, les blogs et les forums RÂ : [rseek.org](https://rseek.org/)\
-   **Site du tidyverse** â€” un ensemble cohÃ©rent de packages conÃ§us pour la science des donnÃ©es avec RÂ : [tidyverse.org](https://www.tidyverse.org/)

## RStudio I

-   Logiciel qui facilite lâ€™utilisation de R grÃ¢ce Ã  une interface simple et bien organisÃ©e.

-   Permet de visualiser la console, les scripts, les graphiques, lâ€™aide, les dossiers et le contenu de la mÃ©moire de R (objets, graphiques, historique des commandes, etc.).

-   Offre de nombreux outils intÃ©grÃ©sÂ : gestion de projets, exÃ©cution du code ligne par ligne et affichage des rÃ©sultats.

ğŸ”— **Liens utilesÂ :**

-   [Site officiel de RStudio / Posit](https://posit.co/products/open-source/rstudio/)\
-   [Documentation RStudio (guide de l'utilisateur)](https://docs.posit.co/ide/user/)

## RStudio II

-   Permet aussi de crÃ©er des rapports, des prÃ©sentations, des sites web, des livres et des applications interactives grÃ¢ce Ã  des outils commeÂ :
    -   [Quarto](https://quarto.org/)\
    -   [R Markdown](https://rmarkdown.rstudio.com/)\
    -   [Shiny](https://shiny.posit.co/)
-   Lâ€™apparence (thÃ¨me, police, disposition des panneaux) et le comportement de RStudio peuvent Ãªtre adaptÃ©s selon les prÃ©fÃ©rences de lâ€™utilisateur.

## Interface de RStudio

L'interface utilisateur de RStudio comporte 4 volets principaux

-   **Source**Â : afficher et modifier divers fichiers liÃ©s au code, notamment les scripts R (`.R`, `.rmd`, `.qmd`, etc.)\
-   **Console**Â : exÃ©cution des commandes\
-   **Environment**Â : variables et objets crÃ©Ã©s\
-   **Outputs**Â : Plots, Viewer et divers onglets utiles (Files, Packages, Help)

## Les quatre volets de RStudio

![](img/rstudio-panes-labeled.jpeg){width="80%" fig-align="center"}

## Personnaliser lâ€™apparence de RStudio

Vous allez passer beaucoup de temps dans RStudioÂ : personnalisez-le pour travailler plus confortablementÂ !

RessourcesÂ :

-   [RStudio user Guide](https://docs.posit.co/ide/user/)

-   [Pane Layout](https://docs.posit.co/ide/user/ide/guide/ui/ui-panes.html)

-   [Themes](https://docs.posit.co/ide/user/ide/guide/ui/appearance.html)

-   [Commande palette](https://docs.posit.co/ide/user/ide/guide/ui/command-palette.html)

## Configurations de RStudio â€” GÃ©nÃ©ral {.smaller}

MenuÂ : **Tools â†’ Global Options â†’ General**

-   DÃ©cocherÂ : *Restore .RData into workspace at startup*\
    â†’ pour ne pas restaurer automatiquement lâ€™espace de travail au dÃ©marrage.

-   ChoisirÂ : *Save workspace to .RData on exitÂ : Never*\
    â†’ pour ne jamais sauvegarder lâ€™espace de travail Ã  la fermeture.

-   DÃ©cocherÂ : *Restore most recently opened project*\
    â†’ empÃªche RStudio dâ€™ouvrir automatiquement le dernier projet utilisÃ©.\
    Cela oblige Ã  ouvrir manuellement le projet sur lequel on veut travailler.

-   DÃ©cocherÂ : *Restore previously open source documents*\
    â†’ Ã©vite que RStudio recharge automatiquement les fichiers script ou RMarkdown ouverts lors de la derniÃ¨re session, pour un dÃ©marrage totalement propre.

::: {.callout-tip title="Objectif" icon="false"}
Repartir dâ€™un environnement vide Ã  chaque session, et sâ€™assurer que tout ce qui est important est contenu dans les scripts.\

Cela force Ã  relancer les scripts Ã  chaque ouverture de RStudio et permet de vÃ©rifier que tout fonctionne correctement du dÃ©but Ã  la fin.
:::

## Configurations de RStudio â€” GÃ©nÃ©ral (illustration)

![](img/rstudio_options_general_basic.png){fig-align="center"}

## Configurations de RStudio â€” Code Editing 

MenuÂ : **Tools â†’ Global Options â†’ Code â†’ Editing**

-   CocherÂ : *Use native pipe operator, \|\>*\
    â†’ active la syntaxe de pipe native introduite dans R (R 4.1+).\
    Permet dâ€™utiliser [`|>`](https://stat.ethz.ch/R-manual/R-devel/library/base/html/pipeOp.html) au lieu de [`%>%`](https://magrittr.tidyverse.org/reference/pipe.html) du package [magrittr](https://magrittr.tidyverse.org/index.html).

-   CocherÂ : *Insert matching parens/quotes*\
    â†’ insÃ¨re automatiquement les parenthÃ¨ses et guillemets fermants, limitant les erreurs de frappe.

-   CocherÂ : *Soft-wrap R source files*\
    â†’ effectue le retour Ã  la ligne automatique des lignes longues, ce qui Ã©vite le dÃ©filement horizontal.

::: {.callout-tip title="Objectif" icon="false"}
Faciliter lâ€™Ã©dition du code, rÃ©duire les erreurs de syntaxe et adopter la syntaxe R moderne avec le pipe natif `|>`.
:::

## Configurations de RStudio â€” Code Editing (illustration)

![](img/rstudio_options_code_editing.png){fig-align="center"}

## Configurations de RStudio â€” Code Display

MenuÂ : **Tools â†’ Global Options â†’ Code â†’ Display**

-   CocherÂ : *Show line numbers*\
    â†’ affiche le numÃ©ro de chaque ligne dans les scripts R et R Markdown, facilitant le repÃ©rage des erreurs et la navigation dans le code.

-   CocherÂ : *Show margin*\
    â†’ affiche une ligne verticale (souvent Ã  80 caractÃ¨res) pour favoriser un code lisible.

-   Laisser cochÃ©eÂ : *Highlight selected line*\
    â†’ met en surbrillance la ligne active pour mieux repÃ©rer la position du curseur.

::: {.callout-tip title="Objectif" icon="false"}
AmÃ©liorer la lisibilitÃ©, la navigation et le repÃ©rage rapide des lignes de code.
:::

## Configurations de RStudio â€” Code Display (illustration)

![](img/rstudio_options_code_display.png){fig-align="center"}

## Configurations de RStudio â€” Code Formatting

MenuÂ : **Tools â†’ Global Options â†’ Code â†’ Formatting**

-   ChoisirÂ : *R code formatting* â†’ **styler**\
    â†’ sÃ©lectionne le package [styler](https://styler.r-lib.org/) comme outil de formatage du code en appliquant automatiquement les conventions de [style du tidyverse](https://style.tidyverse.org/) (indentation cohÃ©rente, espaces normalisÃ©s, code plus lisible).

-   CocherÂ : *Format on save*\
    â†’ applique automatiquement le formatage Ã  chaque sauvegarde de fichier, ce qui garantit un code toujours propre et uniforme, sans action manuelle.

::: {.callout-tip title="Objectif" icon="false"}
Assurer un code clair, cohÃ©rent et bien indentÃ© grÃ¢ce au formatage automatique gÃ©rÃ© par [styler](https://styler.r-lib.org/) Ã  chaque sauvegarde.
:::

## Configurations de RStudio â€” Code Formatting (illustration)

![](img/rstudio_options_code_formatting.png){fig-align="center"}

## Configurations de RStudio â€” Appearance

MenuÂ : **Tools â†’ Global Options â†’ Appearance**

-   Choisir un thÃ¨me clair ou sombre selon vos prÃ©fÃ©rences visuelles\
    â†’ facilite le confort de lecture, surtout lors de longues sessions de travail

-   Ajuster la police (ex. *Fira Code*, *JetBrains Mono*, *Consolas*) et sa taille\
    â†’ pour une meilleure lisibilitÃ© du code

Des thÃ¨mes personnalisÃ©s peuvent Ãªtre installÃ©sÂ :

-   Le package [rsthemes](https://github.com/gadenbuie/rsthemes)\

-   Le thÃ¨me [Dracula](https://draculatheme.com/rstudio)\

-   D'autres [ici](https://github.com/topics/rstheme) et [lÃ ](https://github.com/mkearney/rstudiothemes)

-   Ou depuis **Tools â†’ Global Options â†’ Appearance â†’ Addâ€¦**

## Configurations de RStudio â€” Appearance (illustration)

![](img/rstudio_options_appearance.png){fig-align="center"}

## Tout est objet dans R

Dans R, tout ce que vous manipulez est un objetÂ :

-   des valeurs simples (`x <- 5`),
-   des structures de donnÃ©es (vecteurs, *data frames*, listesâ€¦),
-   des fonctions,
-   et mÃªme des graphiques, modÃ¨les statistiques ou rÃ©sultats dâ€™analyse.

::: {.callout-tip title="Ã€ retenir" icon="false"}
Dans R, tout ce que vous crÃ©ez, importez ou calculez devient un objet stockÃ© en mÃ©moire, visible dans lâ€™onglet **Environment** de RStudio â€” Ã  condition de lui avoir donnÃ© un nom.

Câ€™est cette association Ã  un nom qui permet ensuite de le retrouver et rÃ©utiliser.
:::

## Premiers pas dans R â€” Affectation et opÃ©rateur `<-`

Saisir la commande suivante dans la console, puis appuyer sur <kbd>â†µ Enter</kbd>Â :

```{r, echo = TRUE}
4 + 9
```

Utiliser lâ€™opÃ©rateur dâ€™assignation `<-` pour crÃ©er un objet contenant le rÃ©sultat de `4 * 2` et lâ€™associer au nom xÂ :

```{r, echo = TRUE}
x <- 4 * 2
x
```

Pour insÃ©rer rapidement lâ€™opÃ©rateur dâ€™assignation `<-`Â :

-   <kbd>Alt</kbd> + <kbd>-</kbd> (Windows / Linux)\
-   <kbd>Option</kbd> + <kbd>-</kbd> (macOS)

## Premiers pas dans R â€” Manipuler des vecteurs

Avec la fonction [`c()`](https://stat.ethz.ch/R-manual/R-devel/library/base/html/c.html) , on peut **c**ombiner plusieurs Ã©lÃ©ments sÃ©parÃ©s par une virguleÂ :

```{r, echo = TRUE}
notes <- c(3, 2, 1, 4, 6)
notes

```

On peut ensuite effectuer des calculs sur chacune de ces valeursÂ :

```{r, echo = TRUE}
notes * 2
notes - 1
notes + x
```

## Premiers pas dans R â€” CrÃ©er et nommer des objets

Toutes les instructions R servant Ã  crÃ©er des objets, appelÃ©es *instructions dâ€™affectation*, ont la mÃªme formeÂ :

```{r, echo = TRUE, eval=FALSE}
nom_objet <- valeur

```

On peut lire cette expression commeÂ :

"Le nom de lâ€™objet reÃ§oit la valeur" ou "Stocker ce qu'il y a Ã  droite de `<-` dans un objet nommÃ© Ã  gauche"

-   Tous les objets crÃ©Ã©s apparaissent automatiquement dans le volet **Environment** de RStudio, dâ€™oÃ¹ ils peuvent Ãªtre visualisÃ©s ou supprimÃ©s.

::: callout-warning
Les noms dâ€™objets peuvent contenir des lettres, des chiffres, ainsi que les symboles `.` et `_`, mais ne doivent pas commencer par un chiffre ni contenir dâ€™espace.

R est sensible Ã  la casse (x â‰  X). Ã‰vitez les accents et les majuscules dans les noms dâ€™objets.
:::

## Premiers pas dans R â€” Copier, modifier et supprimer des objets

On peut copier un objetÂ :

```{r, echo = TRUE}
a <- 2
b <- a
b
```

Le modifierÂ :

```{r, echo = TRUE}
a <- 7
a
```

Lâ€™effacer de lâ€™environnement R avec la fonction [`rm()`](https://stat.ethz.ch/R-manual/R-devel/library/base/html/rm.html) ([`remove()`](https://stat.ethz.ch/R-manual/R-devel/library/base/html/rm.html))Â :

```{r, echo = TRUE}
rm(a)
```

## Premiers pas dans R â€” Utilisation de fonctions I

Une fonction exÃ©cute une action Ã  partir dâ€™arguments placÃ©s entre parenthÃ¨ses.

Voici trois fonctions trÃ¨s utiles pour dÃ©buterÂ :

-   [`data.frame()`](https://stat.ethz.ch/R-manual/R-devel/library/base/html/data.frame.html)Â : crÃ©e un tableau de donnÃ©es (*data frame*).\
-   [`mean()`](https://stat.ethz.ch/R-manual/R-devel/library/base/html/mean.html)Â : calcule la moyenne arithmÃ©tique.\
-   [`sd()`](https://stat.ethz.ch/R-manual/R-devel/library/stats/html/sd.html)Â : calcule lâ€™Ã©cart-type (la dispersion autour de la moyenne).

## Premiers pas dans R â€” Utilisation de fonctions II

On va construire une table de donnÃ©es Ã  lâ€™aide de la fonction [`data.frame()`](https://stat.ethz.ch/R-manual/R-devel/library/base/html/data.frame.html), qui regroupe plusieurs variables dans un mÃªme objet.

Lâ€™objet crÃ©Ã© est nommÃ© `d` (nom arbitraire), et contient trois variables, `prenom` (chaÃ®nes de caractÃ¨re Ã©crites entre guillemets), `taille` (en cm) et `poids` (en kg)Â :

```{r echo=TRUE}
d <- data.frame(
  prenom = c("Anne", "Sophie", "Marc", NA),
  taille = c(160, 165, 170, 175),
  poids  = c(55, 60, NA, 72)
)
d
```

## DonnÃ©es manquantes

`NA` (*Not Available*) indique une valeur manquante, quâ€™il sâ€™agisse dâ€™un nombre, dâ€™une chaÃ®ne de caractÃ¨re, etc.

```{r, echo = F}
d
```

Il existe aussi `NaN` (*Not a Number*), qui signale une valeur numÃ©rique indÃ©finie (ex. 0/0)Â :

```{r, echo = T}
0 / 0
```

## Premiers pas dans R â€” Utilisation de fonctions III

Lâ€™opÃ©rateur [`$`](https://stat.ethz.ch/R-manual/R-devel/library/base/html/Syntax.html) permet dâ€™accÃ©der Ã  une colonne (une variable) dâ€™un tableau de donnÃ©es (*data frame*) ou Ã  un Ã©lÃ©ment nommÃ© dâ€™une liste.

Appliquons maintenant les fonctions [`mean()`](https://stat.ethz.ch/R-manual/R-devel/library/base/html/mean.html) et [`sd()`](https://stat.ethz.ch/R-manual/R-devel/library/stats/html/sd.html) Ã  la variable `taille` du *data frame* `d`Â :

```{r echo=TRUE}
mean(d$taille)
sd(d$taille)

```

`d$taille` signifie Â« la variable taille contenue dans `d` Â».

## Premiers pas dans R â€” Arguments de fonction

Les fonctions prennent en entrÃ©e des arguments et renvoient un rÃ©sultat.

Vous pouvez spÃ©cifier les arguments ou utiliser leurs valeurs par dÃ©fautÂ :

```{r echo=TRUE}
mean(d$poids)
mean(d$poids, na.rm = TRUE)

```

-   Pour certaines fonctions comme `mean()`, `median()`, `sd()` ou `min()`, ajoutez lâ€™argument `na.rm = TRUE` (*NA remove*) pour ignorer les valeurs manquantes.

-   Sinon, si la variable contient des `NA`, le rÃ©sultat renvoyÃ© par R sera `NA` (`na.rm = FALSE` par dÃ©faut).

-   `TRUE` est une valeur logique interne Ã  R qui signifie vrai.

## Installer des packages

Pour installer un package depuis RStudioÂ :

1.  Ouvrir lâ€™onglet **Packages** (dans le panneau infÃ©rieur droit).\
2.  Cliquer sur le bouton **Install**.\
3.  Dans la fenÃªtre qui sâ€™ouvre, saisir le *nom du package* (ex.Â : *spicy*).\
4.  Cliquer sur **Install** pour lancer lâ€™installation.

Ou en ligne de commande, avec la fonction [`install.packages()`](https://stat.ethz.ch/R-manual/R-devel/library/utils/html/install.packages.html)Â :

```{r, echo=TRUE, eval=FALSE}
install.packages("spicy")
```

## Charger des packages

Une fois installÃ©s, les packages doivent Ãªtre chargÃ©s dans lâ€™environnement R pour Ãªtre utilisÃ©s avec la fonction [`library()`](https://stat.ethz.ch/R-manual/R-devel/library/base/html/library.html)Â :

```{r, echo=TRUE, eval=FALSE}
library(spicy)
```

Les packages installÃ©s doivent Ãªtre chargÃ©s Ã  chaque nouvelle session R.

## ComplÃ©tion automatique du code

Lâ€™environnement RStudio permet de complÃ©ter automatiquement le code avec la touche <kbd>Tab â†¹</kbd>

-   Saisissez les premiÃ¨res lettres dâ€™une fonction, dâ€™un objet ou dâ€™un argument\
-   Appuyez sur <kbd>Tab â†¹</kbd> pour afficher les suggestions de complÃ©tion\
-   Utilisez ensuite les flÃ¨ches <kbd>â†‘</kbd> et <kbd>â†“</kbd> pour naviguer dans la liste\
-   Validez votre choix avec <kbd>â†µ Enter</kbd> ou continuez Ã  taper

*ExempleÂ :*\
Tapez `mea` puis appuyez sur <kbd>Tab â†¹</kbd> â†’ RStudio suggÃ¨re `mean()`.

::: notes
**Commentaire pour lâ€™oralÂ :**\
La touche **Tabulation (**<kbd>Tab</kbd>) est essentielle dans RStudio.\
Elle permet dâ€™accÃ©lÃ©rer la saisie du code, dâ€™Ã©viter les fautes de frappe et dâ€™explorer les fonctions disponibles sans avoir Ã  tout mÃ©moriser.\
Par exemple, si je tape `mea` puis <kbd>Tab</kbd>, RStudio me propose automatiquement `mean()` avec sa description.\
Câ€™est un excellent moyen de dÃ©couvrir les arguments et dâ€™apprendre plus vite.
:::

## ComplÃ©tion pour les chemins de fichiers

Pour insÃ©rer un chemin dâ€™accÃ¨s Ã  un fichier, placez le curseur entre les guillemets doubles (`""`) puis appuyez sur <kbd>Tab â†¹</kbd>.

-   RStudio affichera alors tous les dossiers et fichiers disponibles dans le rÃ©pertoire de travail.

-   Vous pouvez naviguer avec les flÃ¨ches <kbd>â†‘</kbd> <kbd>â†“</kbd> ou la souris, ouvrir un dossier avec <kbd>Tab â†¹</kbd>, et valider la sÃ©lection avec <kbd>â†µ Enter</kbd>.

Vous pouvez Ã©galement accÃ©der Ã  des fichiers situÃ©s en dehors du rÃ©pertoire actuel en commenÃ§ant Ã  taper le dÃ©but de leur chemin dâ€™accÃ¨s (par exemple `"/Users/"` ou `"C:/"`) et en plaÃ§ant le curseur entre `/` et `"`puis en appuyant sur <kbd>Tab â†¹</kbd> .

## Obtenir de lâ€™aide dans R

-   Utilisez [`?fonction`](https://stat.ethz.ch/R-manual/R-devel/library/utils/html/help.html) ou [`help("fonction")`](https://stat.ethz.ch/R-manual/R-devel/library/utils/html/help.html) pour accÃ©der Ã  la documentation dâ€™une fonction.\
-   Pour explorer un package completÂ : `help(package="nom_du_package")`.\
-   Recherchez des vignettes via [`browseVignettes()`](https://stat.ethz.ch/R-manual/R-devel/library/utils/html/browseVignettes.html) ou [`vignette("nom")`](https://stat.ethz.ch/R-manual/R-devel/library/utils/html/vignette.html) pour des guides illustrÃ©s.\
-   Utilisez des fonctions de recherche interneÂ : [`apropos()`](https://stat.ethz.ch/R-manual/R-devel/library/utils/html/apropos.html), [`help.search()`](https://stat.ethz.ch/R-manual/R-devel/library/utils/html/help.search.html) (alias [`??`](https://stat.ethz.ch/R-manual/R-devel/library/utils/html/help.search.html)) et [`RSiteSearch()`](https://stat.ethz.ch/R-manual/R-devel/library/utils/html/RSiteSearch.html) pour explorer plus largement.\
-   Consultez le portail officielÂ : [Getting Help with R](https://www.r-project.org/help.html) â€” documentation, FAQ, mailing-lists, forums.\
-   Utilisez votre moteur de recherche favori

## Console

La ligne commenÃ§ant par le caractÃ¨re `>` est appelÃ©e lâ€™invite de commande (*prompt* en anglais).

Elle indique que R est prÃªt Ã  recevoir une instructionÂ :

```{r, echo = TRUE, eval=FALSE}
x <- "Hello"
>
```

Dans la console, le signe **`+`** indique que R attend la suite du code, souvent Ã  cause dâ€™un **`"`** ou **`)`** manquantÂ :

```{r, echo = TRUE, eval=FALSE}
x <- "Hello
+
```

Ajouter le caractÃ¨re oubliÃ© (puis <kbd>â†µ Enter</kbd>) ou appuyer sur <kbd>Esc</kbd> (<kbd>Ã‰chap</kbd>) pour annuler et recommencer.

## RÃ©cupÃ©ration des commandes prÃ©cÃ©dentes

La console permet de rappeler les commandes prÃ©cÃ©dentes Ã  lâ€™aide des flÃ¨ches du clavierÂ :

-   <kbd>â†‘</kbd> rappelle la ou les commandes prÃ©cÃ©dentes\
-   <kbd>â†“</kbd> avance dans lâ€™historique\
-   <kbd>Ctrl</kbd> + <kbd>â†‘</kbd> (Windows / Linux) ou <kbd>âŒ˜</kbd> + <kbd>â†‘</kbd> (macOS) ouvre tout lâ€™historique pour parcourir la liste complÃ¨te de vos commandes rÃ©centes

## Lire les rÃ©sultats dans la console I

Quand un objet contient beaucoup de valeurs, R les affiche sur plusieurs lignes dans la console. Par exemple, avec un vecteur de 40 nombresÂ :

```{r, echo = F, out.height="auto"}
options(width = 75)
set.seed(123)  # pour reproduire le mÃªme tirage
tailles <- sample(155:199, 40)
tailles

```

R ajoute un nombre entre crochets (\[ \]) au dÃ©but de chaque ligne. Ce nombre indique la position du premier Ã©lÃ©ment affichÃ© sur cette ligne dans le vecteur.

AinsiÂ :

-   Sur la deuxiÃ¨me ligne, \[18\] signifie que le premier nombre de cette ligne est le 18áµ‰ Ã©lÃ©ment du vecteur

-   Sur la derniÃ¨re ligne, \[35\] signifie que le premier nombre affichÃ© est le 35áµ‰

## Lire les rÃ©sultats dans la console II

Ceci explique aussi le \[1\] affichÃ© lorsquâ€™il y a une seule valeurÂ :

```{r, echo = T}
x <- 8
x
```

Le \[1\] nâ€™est pas un rÃ©sultat, mais un repÃ¨re visuelÂ : il indique simplement que la valeur affichÃ©e correspond au premier Ã©lÃ©ment du vecteur ou du rÃ©sultat.

## Les scripts

-   PlutÃ´t que de saisir les commandes directement dans la console, on les regroupe dans des **scripts R** â€” de simples fichiers texte.

-   Ces scripts conservent une trace de toutes les opÃ©rations effectuÃ©es (importation, nettoyage, analyses, graphiques, etc.).

-   Ils deviennent ainsi le **cÅ“ur du travail reproductible**Â : il suffit de les rouvrir et de rÃ©exÃ©cuter leurs commandes pour recrÃ©er les mÃªmes rÃ©sultats.

## CrÃ©er un script

1.  Menu **File â†’ New File â†’ R Script**\
2.  Une nouvelle zone sâ€™ouvre en haut Ã  gauche de RStudio.\
3.  Enregistrer le script via lâ€™icÃ´ne ğŸ’¾ ou **File â†’ Save/Save as**\
    (les fichiers portent lâ€™extension `.R`).

Dans un script, la touche <kbd>â†µ Enter</kbd> insÃ¨re une nouvelle ligne, elle nâ€™exÃ©cute pas le code (contrairement Ã  la console).

## InsÃ©rer des commentaires dans un script

```{r}

```

-   Les commentaires commencent par un ou plusieurs symboles `#`.\
-   R ignore tout ce qui suit sur la ligne.\
-   Ils servent Ã  expliquer, documenter et structurer les scripts.\

ExempleÂ :

```{r, echo = TRUE}
# Calcul d'une moyenne
mean(1 + 5 + 9) # On peut ajouter ici un autre commentaire
```

Pour insÃ©rer ou retirer rapidement un commentaire dans RStudioÂ :

-   <kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>C</kbd> (Windows / Linux)\
-   <kbd>âŒ˜</kbd> + <kbd>Shift</kbd> + <kbd>C</kbd> (macOS)

Cette commande est Ã©galement accessible depuis le menuÂ :

-   Code â†’ Comment/Uncomment Lines

## CrÃ©er des sections dans un script

Quand un script devient long, il est utile de le structurer en sections pour faciliter la navigation et la lecture.

Pour crÃ©er une section dans RStudio (et des sous-sections), il suffit dâ€™Ã©crire un commentaire suivi dâ€™au moins quatre tirets (`-`)Â :

``` r
# Titre de la section ------------------------------------
## Sous-section ------------------------------------------
### Sous-sous-section ------------------------------------
```

Dans la marge gauche un triangle noir permet de plier ou dÃ©plier le contenu de la section.

Voici un exemple de structure de scriptÂ : [â¬‡ï¸ TÃ©lÃ©charger le modÃ¨le de script](script_template.R)

## Afficher la table des matiÃ¨res du script

-   Cliquer sur lâ€™icÃ´ne **Outline** (tout Ã  droite de la barre dâ€™outils du script), ou utiliser le raccourciÂ :

    -   <kbd>Ctrl</kbd> + <kbd>Maj</kbd> + <kbd>O</kbd> (Windows / Linux)Â 
    -   <kbd>Cmd</kbd> + <kbd>Shift</kbd> + <kbd>O</kbd> (macOS)

-   RStudio affiche alors une table des matiÃ¨res interactive, mise Ã  jour automatiquement, listant toutes les sections du script.

-   Le symbole "\#" sur fond orange, situÃ© en bas de la fenÃªtre du script, donne Ã©galement accÃ¨s Ã  la fonction *Document Outline* (table des matiÃ¨res) dâ€™un simple clic.

## ExÃ©cution du code

Dans un script R, pour exÃ©cuter une instructionÂ :

1.  Placez le curseur nâ€™importe oÃ¹ sur la ligne du code.\

2.  Cliquez sur le bouton **Run** ou utilisez le raccourci clavier suivantÂ :

    -   <kbd>Ctrl</kbd> + <kbd>â†µ Enter</kbd> (Windows / Linux)\
    -   <kbd>âŒ˜</kbd> + <kbd>â†µ Enter</kbd> (macOS)

Lâ€™instruction est alors envoyÃ©e Ã  la console et exÃ©cutÃ©e.

Si une fonction ou un bloc de code sâ€™Ã©tend sur plusieurs lignes du script, RStudio exÃ©cute automatiquement lâ€™ensemble du bloc complet.

Vous pouvez aussi sÃ©lectionner une partie du code (en surbrillance) et lâ€™exÃ©cuter de la mÃªme maniÃ¨re, avec **Run** ou le raccourci clavier.

## *Workflow* (flux de travail)

ManiÃ¨re structurÃ©e et reproductible dâ€™organiser son travail

-   Eviter le code spaghettiÂ : un code dÃ©sordonnÃ©, illisible et non structurÃ©, difficile Ã  rÃ©utiliser.
-   Travail reproductible
-   Collaboration facilitÃ©e
-   Apprentissage facilitÃ©

## *Working directory* (rÃ©pertoire de travail)

-   C'est le dossier oÃ¹ R lit et enregistre les fichiers par dÃ©faut

-   Le rÃ©pertoire de travail utilisÃ© par R est indiquÃ© en haut du volet de la console RStudio

Ou exÃ©cuter la fonction [`getwd()`](https://stat.ethz.ch/R-manual/R-devel/library/base/html/getwd.html)Â :

```{r, echo = TRUE, eval=T}
# Get the working directory
getwd()
```

## RÃ©pertoire de travail par dÃ©faut dans RStudio

-   RStudio dÃ©marre toujours dans le mÃªme dossier par dÃ©faut

-   Pour connaÃ®tre cet emplacement, allez dans le menuÂ : **Tools â†’ Global Options â†’ General â†’ Basic**

-   Dossier par dÃ©faut utilisÃ© par RStudio lorsquâ€™aucun projet nâ€™est ouvert

![](img/rstudio_options_general_basic.png){width="40%" fig-align="center"}

## DÃ©finir son rÃ©pertoire de travail par dÃ©faut (hors projet)

-   ConseillÃ© de rassembler tous vos fichiers au mÃªme endroit lorque vous ne travaillez pas dans un projet R

-   DÃ©finir un rÃ©pertoire de travail par dÃ©faut (*working directory*).

Exemple personnelÂ :

-   J'ai crÃ©e un dossier structurÃ© comme suitÂ : `Code â†’ R â†’ sandbox` dans mon dossier *Documents* (`~/Documents/Code/R/sandbox`).
    -   Vous pouvez le mettre sur votre Bureau (`~/Desktop/Code/R/sandbox`) ou ailleurs selon vos prÃ©fÃ©rences.
-   Tous les fichiers sauvegardÃ©s (hors projet) seront automatiquement enregistrÃ©s dans ce dossier `sandbox`.

## Les projets RStudio

-   FonctionnalitÃ© de RStudio pour organiser son travail.\
-   Regroupe tous les Ã©lÃ©ments dâ€™une analyseÂ : donnÃ©es, scripts, rÃ©sultats, figures, documentation.
-   Facilite la gestion et la **reproductibilitÃ©**.\
-   ObjectifÂ : tout garder ensemble dans un seul dossier.

## Quâ€™est-ce quâ€™un projet ?

En pratique, un projet RStudio correspond simplement Ã  un dossier\
crÃ©Ã© sur votre disque dur, dans lequel vous placerezÂ :

-   les jeux de donnÃ©es (brutes et nettoyÃ©es),\
-   les scripts R,\
-   les documents (notes, rapports, etc.),\
-   les rÃ©sultats et figures.

RStudio reconnaÃ®t ce dossier comme un projet et lâ€™ouvre dans une session dÃ©diÃ©e, avec son propre environnement.

## Pourquoi utiliser des projets ?

Utiliser les projets RStudio offre plusieurs avantagesÂ :

-   R dÃ©marre automatiquement dans le dossier du projet, ce qui simplifie lâ€™accÃ¨s aux fichiers sans Ã©crire de longs chemins dâ€™accÃ¨s.\
-   Si vous dÃ©placez votre dossier, le projet continue de fonctionner.\
-   Lâ€™onglet **Files** (en bas Ã  droite) permet de naviguer facilement dans le contenu du projet.\
-   Vous pouvez changer de projet en un clic si vous travaillez sur plusieurs analyses.

## CrÃ©er un projet RStudio

Pour crÃ©er un projetÂ :

1.  Menu **File â†’ New Projectâ€¦**\
2.  Selon la situationÂ :
    -   **New Directory** â†’ crÃ©er un nouveau dossier vide\
    -   **Existing Directory** â†’ utiliser un dossier existant
3.  Cliquez sur **Create Project**

Ã€ la crÃ©ation (et Ã  chaque ouverture du projet), RStudio lance une nouvelle session R et dÃ©finit automatiquement le dossier du projet comme rÃ©pertoire de travail (*working directory*).

## GÃ©rer ses projets au quotidien

Une fois le projet crÃ©Ã©Â :

-   Son nom sâ€™affiche en haut Ã  droite de lâ€™interface RStudio.\
-   Ce menu dÃ©roulant permet de passer facilement dâ€™un projet Ã  lâ€™autre.\
-   Chaque projet conserve son historique, environnement et fichiers propres.\
-   Pour rouvrir un projet, il suffit de **double-cliquer sur le fichier `.Rproj`** ou de passer par le menu **File â†’ Open Projectâ€¦** et de sÃ©lectionner le fichier `.Rproj`\*\*Â : RStudio sâ€™ouvre automatiquement dans une nouvelle session dÃ©diÃ©e Ã  ce projet.

::: {.callout-tip title="AstuceÂ : un projet = un dossier = une analyse"}
Adoptez dÃ¨s le dÃ©part la bonne habitudeÂ : un dossier par projet â€” clair, isolÃ©, reproductible.
:::

Pour en savoir plus sur la gestion des projetsÂ : <https://www.rstudio.com/ide/docs/using/projects>

## *Workflow* reproductible

Structure recommandÃ©eÂ :

```         
mon_projet/
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ raw/        # donnÃ©es brutes
â”‚   â””â”€â”€ processed/  # donnÃ©es nettoyÃ©es
â”œâ”€â”€ scripts/
â”‚   â””â”€â”€ analyse.R
â”‚   â””â”€â”€ clean_data.R
â”œâ”€â”€ outputs/
â”‚   â”œâ”€â”€ figures/
â”‚   â””â”€â”€ tables/
â””â”€â”€ mon_projet.Rproj
```

::: {.callout-tip title="Script Ã  tÃ©lÃ©charger pour crÃ©er l'arborescence d'un projet" icon="false"}
Vous pouvez tÃ©lÃ©charger et exÃ©cuter le script suivant pour crÃ©er automatiquement la structure de base dâ€™un projet RÂ :

[â¬‡ï¸  init_project.R](init_project.R)

**ImportantÂ :** exÃ©cutez ce script <span style="color:red">**depuis le rÃ©pertoire du projet**</span> (ou aprÃ¨s avoir ouvert le projet `.Rproj` dans RStudio), afin que les dossiers soient crÃ©Ã©s au bon endroit.
:::

## Formats et extensions des fichiers R

### Fichiers de donnÃ©es

-   **`.RData`** *(ou raccourci `.rda`)*Â : permet de **stocker plusieurs objets** R dans un mÃªme fichier.\
-   **`.rds`**Â : permet de **sauvegarder un seul objet** Ã  la fois (prÃ©fÃ©rable pour les *workflows* reproductibles).

### Fichiers de code

-   **`.R`**Â : contient des **scripts R**, câ€™est-Ã -dire du code exÃ©cutable.

### Fichiers de projet

-   **`.Rproj`**Â : utilisÃ© par RStudio pour dÃ©finir un projet R (rÃ©pertoire de travail, options, historique, etc.).

## Importer des donnÃ©es dans R â€” Trop de fonctions !

Beaucoup (trop) de packages et de fonctions diffÃ©rentesÂ :

```{r, echo = TRUE, eval=FALSE}
# Fichiers R
load("data/raw/data.rda")
data <- readRDS("data/raw/data.rds")

# Fichiers CSV
data <- read.csv("data/raw/data.csv")
data <- readr::read_csv("data/raw/data.csv")

# Fichiers Excel
data <- xlsx::read.xlsx("data/raw/data.xlsx")
data <- readxl::read_excel("data/raw/data.xlsx")

# Fichiers SPSS / Stata / SAS
data <- haven::read_spss("data/raw/data.sav")
data <- haven::read_stata("data/raw/data.dta")
data <- haven::read_sas("data/raw/data.sas7bdat")

# etc.

```

## Importer et exporter des donnÃ©es avec **`rio`**

Le package [`rio`](https://gesistsa.github.io/rio/) simplifie grandement lâ€™importation et lâ€™exportation de fichiers de donnÃ©es dans R.

### Fonctions principales

-   [`import()`](https://gesistsa.github.io/rio/reference/import.html) â†’ Lire un fichier
-   [`export()`](https://gesistsa.github.io/rio/reference/export.html) â†’ Sauvegarder un objet R

De nombreux [formats supportÃ©s](https://gesistsa.github.io/rio/index.html#supported-file-formats)Â : `.csv`, `.xlsx`, `.rda`, `.sav`, etc.

```{r, echo = TRUE, eval=FALSE}
# Importer diffÃ©rents formats
import("data/raw/data.xlsx")
import("data/raw/data.rda")
import("data/raw/data.dta")

# Exporter un objet R
export(data, "data/processed/data.csv")
export(data, "data/processed/data.rds")
export(data, "data/processed/data.sav")
```

## Importer des donnÃ©es par les menus de RStudio

Lâ€™importation peut aussi se faire depuis le volet **Environnement â†’ Import Dataset**Â :

![](img/import_data.png){width="40%" fig-align="center"}


## Nettoyage de lâ€™environnement

Videz votre **Environnement** comme si vous reveniez Ã  ce projet aprÃ¨s une longue pause.

### Deux solutions simples

-   Cliquez sur lâ€™icÃ´ne du **balai ğŸ§¹** dans le panneau **Environment** pour tout effacer.\
-   Ou exÃ©cutez dans la consoleÂ :

```{r, eval=FALSE, echo=TRUE}
rm(list = ls())
```

::: {.callout-tip title="AstuceÂ : Relancer complÃ¨tement R"}
Vous pouvez aussi redÃ©marrer la session R (**Session â†’ Restart R**)Â : cela vide lâ€™environnement et dÃ©charge tous les packages chargÃ©s.  

MÃ©thode la plus sÃ»re pour repartir sur une base propre.
:::

## Ressources pour apprendre et approfondir R

-   [Introduction Ã  R et au tidyverse](https://juba.github.io/tidyverse/)Â : TrÃ¨s bonne introduction en franÃ§ais

-   [R for Data Science (2e)](https://r4ds.hadley.nz/)Â : Introduction complÃ¨te et progressive Ã  la science des donnÃ©es avec R

-   [Awesome R Learning Resources](https://github.com/iamericfletcher/awesome-r-learning-resources)Â : Liste des packages/travaux/etc. gÃ©niaux dans R

-   [Advanced R](https://adv-r.hadley.nz/index.html)Â : Exploration approfondie du langage R

-   [The Art of R Programming](https://nostarch.com/artofr.htm)Â : Ouvrage de rÃ©fÃ©rence sur la programmation avancÃ©e et les bonnes pratiques en R (non disponible en libre accÃ¨s)
